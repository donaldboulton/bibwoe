var IdealImageSlider = function () { "use strict"; var t, i, e = (t = window)["r" + (i = "equestAnimationFrame")] || t["webkitR" + i] || t["mozR" + i] || t["msR" + i] || function (t) { setTimeout(t, 1e3 / 60) }, s = function (t, i) { var s = (new Date).getTime(), r = {}; return r.value = e(function n() { (new Date).getTime() - s >= i ? t.call() : r.value = e(n) }), r }, r = function (t) { return Math.round(t) === t }, n = function (t) { t = t || {}; for (var i = 1; i < arguments.length; i++) { var e = arguments[i]; if (e) for (var s in e) e.hasOwnProperty(s) && (r = "Object", a = e[s], void 0, u = Object.prototype.toString.call(a).slice(8, -1), void 0 !== a && null !== a && u === r && null !== e[s] ? n(t[s], e[s]) : t[s] = e[s]) } var r, a, u; return t }, a = function (t, i) { return !!i && (t.classList ? t.classList.contains(i) : new RegExp("(^| )" + i + "( |$)", "gi").test(t.className)) }, u = function (t, i) { i && (t.classList ? t.classList.add(i) : t.className += " " + i) }, h = function (t, i) { i && (t.classList ? t.classList.remove(i) : t.className = t.className.replace(new RegExp("(^|\\b)" + i.split(" ").join("|") + "(\\b|$)", "gi"), " ")) }, o = function (t, i, e) { null !== t && void 0 !== t && (t.addEventListener ? t.addEventListener(i, e, !1) : t.attachEvent ? t.attachEvent("on" + i, e) : t["on" + i] = e) }, l = function (t, i) { if (!t.style.backgroundImage) { var e = new Image; e.setAttribute("src", t.getAttribute("data-src")), e.onload = function () { t.style.backgroundImage = "url(" + t.getAttribute("data-src") + ")", t.setAttribute("data-actual-width", this.naturalWidth), t.setAttribute("data-actual-height", this.naturalHeight), "function" == typeof i && i(this) } } }, d = function (t, i, e) { t.style.webkitTransitionDuration = t.style.MozTransitionDuration = t.style.msTransitionDuration = t.style.OTransitionDuration = t.style.transitionDuration = e + "ms", t.style.webkitTransform = t.style.MozTransform = t.style.msTransform = t.style.OTransform = "translateX(" + i + "px)" }, c = function (t) { t.style.removeProperty("-webkit-transition-duration"), t.style.removeProperty("transition-duration"), t.style.removeProperty("-webkit-transform"), t.style.removeProperty("-ms-transform"), t.style.removeProperty("transform") }, b = function (t, i) { if (void 0 === i && (i = !0), !r(t.settings.height)) { var s = Math.round(t._attributes.container.offsetHeight), n = s; if (t._attributes.aspectWidth && t._attributes.aspectHeight) n = t._attributes.aspectHeight / t._attributes.aspectWidth * t._attributes.container.offsetWidth; else { var a = t._attributes.currentSlide.getAttribute("data-actual-width"), u = t._attributes.currentSlide.getAttribute("data-actual-height"); a && u && (n = u / a * t._attributes.container.offsetWidth) } var h, o, l, d, c = parseInt(t.settings.maxHeight, 10); if (c && n > c && (n = c), (n = Math.round(n)) !== s) i ? (h = { time: t.settings.transitionDuration, run: function (i) { t._attributes.container.style.height = Math.round(i * (n - s) + s) + "px" } }, o = h.time, l = +new Date + o, (d = function () { var t = +new Date, i = l - t; if (i < 60) h.run(1); else { var s = 1 - i / o; h.run(s), e(d) } })()) : t._attributes.container.style.height = n + "px" } }, g = { vars: { start: {}, delta: {}, isScrolling: void 0, direction: null }, start: function (t) { if (!a(this._attributes.container, this.settings.classes.animating)) { var i = t.touches[0]; g.vars.start = { x: i.pageX, y: i.pageY, time: +new Date }, g.vars.delta = {}, g.vars.isScrolling = void 0, g.vars.direction = null, this.stop(), this.settings.beforeChange.apply(this), u(this._attributes.container, this.settings.classes.touching) } }, move: function (t) { if (!a(this._attributes.container, this.settings.classes.animating) && !(t.touches.length > 1 || t.scale && 1 !== t.scale)) { var i = t.touches[0]; g.vars.delta = { x: i.pageX - g.vars.start.x, y: i.pageY - g.vars.start.y }, void 0 === g.vars.isScrolling && (g.vars.isScrolling = !!(g.vars.isScrolling || Math.abs(g.vars.delta.x) < Math.abs(g.vars.delta.y))), g.vars.isScrolling || (t.preventDefault(), d(this._attributes.previousSlide, g.vars.delta.x - this._attributes.previousSlide.offsetWidth, 0), d(this._attributes.currentSlide, g.vars.delta.x, 0), d(this._attributes.nextSlide, g.vars.delta.x + this._attributes.currentSlide.offsetWidth, 0)) } }, end: function (t) { if (!a(this._attributes.container, this.settings.classes.animating)) { var i = +new Date - g.vars.start.time, e = Number(i) < 250 && Math.abs(g.vars.delta.x) > 20 || Math.abs(g.vars.delta.x) > this._attributes.currentSlide.offsetWidth / 2, r = g.vars.delta.x < 0 ? "next" : "previous", n = this.settings.transitionDuration ? this.settings.transitionDuration / 2 : 0; g.vars.isScrolling || (e ? (g.vars.direction = r, "next" == g.vars.direction ? (d(this._attributes.currentSlide, -this._attributes.currentSlide.offsetWidth, n), d(this._attributes.nextSlide, 0, n)) : (d(this._attributes.previousSlide, 0, n), d(this._attributes.currentSlide, this._attributes.currentSlide.offsetWidth, n)), s(g.transitionEnd.bind(this), n)) : "next" == r ? (d(this._attributes.currentSlide, 0, n), d(this._attributes.nextSlide, this._attributes.currentSlide.offsetWidth, n)) : (d(this._attributes.previousSlide, -this._attributes.previousSlide.offsetWidth, n), d(this._attributes.currentSlide, 0, n)), n && (u(this._attributes.container, this.settings.classes.animating), s(function () { h(this._attributes.container, this.settings.classes.animating) }.bind(this), n))) } }, transitionEnd: function (t) { if (g.vars.direction) { c(this._attributes.previousSlide), c(this._attributes.currentSlide), c(this._attributes.nextSlide), h(this._attributes.container, this.settings.classes.touching), h(this._attributes.previousSlide, this.settings.classes.previousSlide), h(this._attributes.currentSlide, this.settings.classes.currentSlide), h(this._attributes.nextSlide, this.settings.classes.nextSlide), this._attributes.currentSlide.setAttribute("aria-hidden", "true"); var i = this._attributes.slides, e = i.indexOf(this._attributes.currentSlide); "next" == g.vars.direction ? (this._attributes.previousSlide = this._attributes.currentSlide, this._attributes.currentSlide = i[e + 1], this._attributes.nextSlide = i[e + 2], void 0 === this._attributes.currentSlide && void 0 === this._attributes.nextSlide ? (this._attributes.currentSlide = i[0], this._attributes.nextSlide = i[1]) : void 0 === this._attributes.nextSlide && (this._attributes.nextSlide = i[0]), l(this._attributes.nextSlide)) : (this._attributes.nextSlide = this._attributes.currentSlide, this._attributes.previousSlide = i[e - 2], this._attributes.currentSlide = i[e - 1], void 0 === this._attributes.currentSlide && void 0 === this._attributes.previousSlide ? (this._attributes.currentSlide = i[i.length - 1], this._attributes.previousSlide = i[i.length - 2]) : void 0 === this._attributes.previousSlide && (this._attributes.previousSlide = i[i.length - 1]), l(this._attributes.previousSlide)), u(this._attributes.previousSlide, this.settings.classes.previousSlide), u(this._attributes.currentSlide, this.settings.classes.currentSlide), u(this._attributes.nextSlide, this.settings.classes.nextSlide), this._attributes.currentSlide.setAttribute("aria-hidden", "false"), b(this), this.settings.afterChange.apply(this) } } }, S = function (t) { this.settings = { selector: "", height: "auto", initialHeight: 400, maxHeight: null, interval: 4e3, transitionDuration: 700, effect: "slide", disableNav: !1, keyboardNav: !0, previousNavSelector: "", nextNavSelector: "", classes: { container: "ideal-image-slider", slide: "iis-slide", previousSlide: "iis-previous-slide", currentSlide: "iis-current-slide", nextSlide: "iis-next-slide", previousNav: "iis-previous-nav", nextNav: "iis-next-nav", animating: "iis-is-animating", touchEnabled: "iis-touch-enabled", touching: "iis-is-touching", directionPrevious: "iis-direction-previous", directionNext: "iis-direction-next" }, onInit: function () { }, onStart: function () { }, onStop: function () { }, onDestroy: function () { }, beforeChange: function () { }, afterChange: function () { } }, "string" == typeof t ? this.settings.selector = t : "object" == typeof t && n(this.settings, t); var i = document.querySelector(this.settings.selector); if (!i) return null; var e, s = (e = i.children, Array.prototype.slice.call(e)), h = []; i.innerHTML = "", Array.prototype.forEach.call(s, function (t, e) { if (t instanceof HTMLImageElement || t instanceof HTMLAnchorElement) { var s = document.createElement("a"), r = "", a = ""; if (t instanceof HTMLAnchorElement) { r = t.getAttribute("href"), a = t.getAttribute("target"); var o = t.querySelector("img"); if (null === o) return; t = o } void 0 !== t.dataset ? (n(s.dataset, t.dataset), t.dataset.src ? s.dataset.src = t.dataset.src : s.dataset.src = t.src, (window.devicePixelRatio > 1 || window.matchMedia && window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),(min--moz-device-pixel-ratio: 1.5),(-o-min-device-pixel-ratio: 3/2),(min-resolution: 1.5dppx)").matches) && t.dataset["src-2x"] && (s.dataset.src = t.dataset["src-2x"])) : t.getAttribute("data-src") ? s.setAttribute("data-src", t.getAttribute("data-src")) : s.setAttribute("data-src", t.getAttribute("src")), r && s.setAttribute("href", r), a && s.setAttribute("target", a), t.getAttribute("className") && u(s, t.getAttribute("className")), t.getAttribute("id") && s.setAttribute("id", t.getAttribute("id")), t.getAttribute("title") && s.setAttribute("title", t.getAttribute("title")), t.getAttribute("alt") && (s.innerHTML = t.getAttribute("alt")), s.setAttribute("role", "tabpanel"), s.setAttribute("aria-hidden", "true"), s.style.cssText += "-webkit-transition-duration:" + this.settings.transitionDuration + "ms;-moz-transition-duration:" + this.settings.transitionDuration + "ms;-o-transition-duration:" + this.settings.transitionDuration + "ms;transition-duration:" + this.settings.transitionDuration + "ms;", i.appendChild(s), h.push(s) } }.bind(this)); var d, c, S = h; if (S.length <= 1) return i.innerHTML = "", Array.prototype.forEach.call(s, function (t, e) { i.appendChild(t) }), null; this.settings.disableNav || (this.settings.previousNavSelector ? d = document.querySelector(this.settings.previousNavSelector) : (d = document.createElement("a"), i.appendChild(d)), this.settings.nextNavSelector ? c = document.querySelector(this.settings.nextNavSelector) : (c = document.createElement("a"), i.appendChild(c)), u(d, this.settings.classes.previousNav), u(c, this.settings.classes.nextNav), o(d, "click", function () { if (a(this._attributes.container, this.settings.classes.animating)) return !1; this.stop(), this.previousSlide() }.bind(this)), o(c, "click", function () { if (a(this._attributes.container, this.settings.classes.animating)) return !1; this.stop(), this.nextSlide() }.bind(this)), ("ontouchstart" in window || window.DocumentTouch && document instanceof DocumentTouch) && (this.settings.effect = "slide", d.style.display = "none", c.style.display = "none", u(i, this.settings.classes.touchEnabled), o(i, "touchstart", g.start.bind(this)), o(i, "touchmove", g.move.bind(this)), o(i, "touchend", g.end.bind(this))), this.settings.keyboardNav && o(document, "keyup", function (t) { var i = "number" == typeof (t = t || window.event).which ? t.which : t.keyCode; if (37 == i) { if (a(this._attributes.container, this.settings.classes.animating)) return !1; this.stop(), this.previousSlide() } else if (39 == i) { if (a(this._attributes.container, this.settings.classes.animating)) return !1; this.stop(), this.nextSlide() } }.bind(this))); if (this._attributes = { container: i, slides: S, previousSlide: void 0 !== S[S.length - 1] ? S[S.length - 1] : S[0], currentSlide: S[0], nextSlide: void 0 !== S[1] ? S[1] : S[0], timerId: 0, origChildren: s, aspectWidth: 0, aspectHeight: 0 }, r(this.settings.height)) this._attributes.container.style.height = this.settings.height + "px"; else { if (r(this.settings.initialHeight) && (this._attributes.container.style.height = this.settings.initialHeight + "px"), this.settings.height.indexOf(":") > -1) { var _ = this.settings.height.split(":"); 2 == _.length && r(parseInt(_[0], 10)) && r(parseInt(_[1], 10)) && (this._attributes.aspectWidth = parseInt(_[0], 10), this._attributes.aspectHeight = parseInt(_[1], 10)) } o(window, "resize", function () { b(this, !1) }.bind(this)) } u(i, this.settings.classes.container), u(i, "iis-effect-" + this.settings.effect), Array.prototype.forEach.call(this._attributes.slides, function (t, i) { u(t, this.settings.classes.slide) }.bind(this)), u(this._attributes.previousSlide, this.settings.classes.previousSlide), u(this._attributes.currentSlide, this.settings.classes.currentSlide), u(this._attributes.nextSlide, this.settings.classes.nextSlide), this._attributes.currentSlide.setAttribute("aria-hidden", "false"), l(this._attributes.currentSlide, function () { this.settings.onInit.apply(this), b(this, !1) }.bind(this)), l(this._attributes.previousSlide), l(this._attributes.nextSlide) }; return S.prototype.get = function (t) { return this._attributes ? this._attributes.hasOwnProperty(t) ? this._attributes[t] : void 0 : null }, S.prototype.set = function (t, i) { return this._attributes ? this._attributes[t] = i : null }, S.prototype.start = function () { this._attributes && (this._attributes.timerId = setInterval(this.nextSlide.bind(this), this.settings.interval), this.settings.onStart.apply(this), window.onblur = function () { this.stop() }.bind(this)) }, S.prototype.stop = function () { this._attributes && (clearInterval(this._attributes.timerId), this._attributes.timerId = 0, this.settings.onStop.apply(this)) }, S.prototype.previousSlide = function () { this.settings.beforeChange.apply(this), h(this._attributes.previousSlide, this.settings.classes.previousSlide), h(this._attributes.currentSlide, this.settings.classes.currentSlide), h(this._attributes.nextSlide, this.settings.classes.nextSlide), this._attributes.currentSlide.setAttribute("aria-hidden", "true"); var t = this._attributes.slides, i = t.indexOf(this._attributes.currentSlide); this._attributes.nextSlide = this._attributes.currentSlide, this._attributes.previousSlide = t[i - 2], this._attributes.currentSlide = t[i - 1], void 0 === this._attributes.currentSlide && void 0 === this._attributes.previousSlide ? (this._attributes.currentSlide = t[t.length - 1], this._attributes.previousSlide = t[t.length - 2]) : void 0 === this._attributes.previousSlide && (this._attributes.previousSlide = t[t.length - 1]), l(this._attributes.previousSlide), u(this._attributes.previousSlide, this.settings.classes.previousSlide), u(this._attributes.currentSlide, this.settings.classes.currentSlide), u(this._attributes.nextSlide, this.settings.classes.nextSlide), this._attributes.currentSlide.setAttribute("aria-hidden", "false"), u(this._attributes.container, this.settings.classes.directionPrevious), s(function () { h(this._attributes.container, this.settings.classes.directionPrevious) }.bind(this), this.settings.transitionDuration), this.settings.transitionDuration && (u(this._attributes.container, this.settings.classes.animating), s(function () { h(this._attributes.container, this.settings.classes.animating) }.bind(this), this.settings.transitionDuration)), b(this), this.settings.afterChange.apply(this) }, S.prototype.nextSlide = function () { this.settings.beforeChange.apply(this), h(this._attributes.previousSlide, this.settings.classes.previousSlide), h(this._attributes.currentSlide, this.settings.classes.currentSlide), h(this._attributes.nextSlide, this.settings.classes.nextSlide), this._attributes.currentSlide.setAttribute("aria-hidden", "true"); var t = this._attributes.slides, i = t.indexOf(this._attributes.currentSlide); this._attributes.previousSlide = this._attributes.currentSlide, this._attributes.currentSlide = t[i + 1], this._attributes.nextSlide = t[i + 2], void 0 === this._attributes.currentSlide && void 0 === this._attributes.nextSlide ? (this._attributes.currentSlide = t[0], this._attributes.nextSlide = t[1]) : void 0 === this._attributes.nextSlide && (this._attributes.nextSlide = t[0]), l(this._attributes.nextSlide), u(this._attributes.previousSlide, this.settings.classes.previousSlide), u(this._attributes.currentSlide, this.settings.classes.currentSlide), u(this._attributes.nextSlide, this.settings.classes.nextSlide), this._attributes.currentSlide.setAttribute("aria-hidden", "false"), u(this._attributes.container, this.settings.classes.directionNext), s(function () { h(this._attributes.container, this.settings.classes.directionNext) }.bind(this), this.settings.transitionDuration), this.settings.transitionDuration && (u(this._attributes.container, this.settings.classes.animating), s(function () { h(this._attributes.container, this.settings.classes.animating) }.bind(this), this.settings.transitionDuration)), b(this), this.settings.afterChange.apply(this) }, S.prototype.gotoSlide = function (t) { this.settings.beforeChange.apply(this), this.stop(), h(this._attributes.previousSlide, this.settings.classes.previousSlide), h(this._attributes.currentSlide, this.settings.classes.currentSlide), h(this._attributes.nextSlide, this.settings.classes.nextSlide), this._attributes.currentSlide.setAttribute("aria-hidden", "true"), t--; var i = this._attributes.slides, e = i.indexOf(this._attributes.currentSlide); this._attributes.previousSlide = i[t - 1], this._attributes.currentSlide = i[t], this._attributes.nextSlide = i[t + 1], void 0 === this._attributes.previousSlide && (this._attributes.previousSlide = i[i.length - 1]), void 0 === this._attributes.nextSlide && (this._attributes.nextSlide = i[0]), l(this._attributes.previousSlide), l(this._attributes.currentSlide), l(this._attributes.nextSlide), u(this._attributes.previousSlide, this.settings.classes.previousSlide), u(this._attributes.currentSlide, this.settings.classes.currentSlide), u(this._attributes.nextSlide, this.settings.classes.nextSlide), this._attributes.currentSlide.setAttribute("aria-hidden", "false"), t < e ? (u(this._attributes.container, this.settings.classes.directionPrevious), s(function () { h(this._attributes.container, this.settings.classes.directionPrevious) }.bind(this), this.settings.transitionDuration)) : (u(this._attributes.container, this.settings.classes.directionNext), s(function () { h(this._attributes.container, this.settings.classes.directionNext) }.bind(this), this.settings.transitionDuration)), this.settings.transitionDuration && (u(this._attributes.container, this.settings.classes.animating), s(function () { h(this._attributes.container, this.settings.classes.animating) }.bind(this), this.settings.transitionDuration)), b(this), this.settings.afterChange.apply(this) }, S.prototype.destroy = function () { clearInterval(this._attributes.timerId), this._attributes.timerId = 0, this._attributes.container.innerHTML = "", Array.prototype.forEach.call(this._attributes.origChildren, function (t, i) { this._attributes.container.appendChild(t) }.bind(this)), h(this._attributes.container, this.settings.classes.container), h(this._attributes.container, "iis-effect-" + this.settings.effect), this._attributes.container.style.height = "", this.settings.onDestroy.apply(this) }, { _hasClass: a, _addClass: u, _removeClass: h, Slider: S } }();